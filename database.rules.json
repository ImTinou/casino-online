{
    "rules": {
      "sio_rooms": {
        "$roomId": {
          ".read": true,
          ".write": true,
          ".validate": "newData.hasChildren(['code', 'dealer', 'players', 'gameState', 'created'])",
          "code": {
            ".validate": "newData.isString() && newData.val().length === 6"
          },
          "dealer": {
            ".validate": "newData.isString() && newData.val().length <= 12"
          },
          "players": {
            ".validate": "newData.hasChildren() || newData.val() === null",
            "$playerId": {
              ".validate": "newData.hasChildren(['name', 'hands', 'status', 'position'])",
              "name": {
                ".validate": "newData.isString() && newData.val().length <= 12"
              }
            }
          },
          "gameState": {
            ".validate": "newData.isString() && newData.val().matches(/^(waiting|dealing|playing|dealer_turn|dealer_playing|finished)$/)"
          },
          "chat": {
            "$messageId": {
              ".validate": "newData.hasChildren(['name', 'text', 'time'])",
              "name": {
                ".validate": "newData.isString() && newData.val().length <= 12"
              },
              "text": {
                ".validate": "newData.isString() && newData.val().length <= 120"
              },
              "time": {
                ".validate": "newData.isNumber()"
              }
            }
          },
          "created": {
            ".validate": "newData.isNumber()"
          },
          "lastUpdate": {
            ".validate": "newData.isNumber()"
          }
        }
      }
    }
  }